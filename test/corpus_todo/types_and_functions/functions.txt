================================================================================
Functions 1
================================================================================

plus : Nat -> Nat -> Nat
plus Z     y = y
plus (S k) y = S (plus k y)

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (expr
          (atom
            (qid))
          (expr
            (atom
              (qid)))))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (qid))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid)))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (expr
          (atom
            (qid))
          (atom
            (qid))))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (expr
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))))))))

================================================================================
Functions 2
================================================================================

mult : Nat -> Nat -> Nat
mult Z     y = Z
mult (S k) y = plus y (mult k y)

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (expr
          (atom
            (qid))
          (expr
            (atom
              (qid)))))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (qid))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid)))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (expr
          (atom
            (qid))
          (atom
            (qid))))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (expr
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))))))))

================================================================================
where clauses 1
================================================================================

reverse : List a -> List a
reverse xs = revAcc [] xs where
  revAcc : List a -> List a -> List a
  revAcc acc [] = acc
  revAcc acc (x :: xs) = revAcc (x :: acc) xs

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))
        (expr
          (atom
            (qid))
          (atom
            (qid))))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))))
    (where
      (function
        (lhs
          (function_name
            (atom
              (qid))))
        (rhs
          (expr
            (atom
              (qid))
            (atom
              (qid))
            (expr
              (atom
                (qid))
              (atom
                (qid))
              (expr
                (atom
                  (qid))
                (atom
                  (qid)))))))
      (function
        (lhs
          (atom
            (qid))
          (atom
            (qid))
          (atom
            (qid)))
        (rhs
          (expr
            (atom
              (qid)))))
      (function
        (lhs
          (atom
            (qid))
          (atom
            (qid))
          (atom
            (expr
              (atom
                (qid))
              (atom
                (qid))
              (atom
                (qid)))))
        (rhs
          (expr
            (atom
              (qid))
            (atom
              (expr
                (atom
                  (qid))
                (atom
                  (qid))
                (atom
                  (qid))))
            (atom
              (qid))))))))

================================================================================
where clauses 2
================================================================================

foo : Int -> Int
foo x = case isLT of
            Yes => x*2
            No => x*4
    where
       data MyLT = Yes | No

       isLT : MyLT
       isLT = if x < 20 then Yes else No

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (expr
          (atom
            (qid))))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))))
    (where
      (data
        (data_name)
        (expr
          (atom
            (qid))
          (atom
            (qid))))
      (function
        (lhs
          (function_name
            (atom
              (qid))))
        (rhs
          (expr
            (atom
              (qid)))))
      (function
        (lhs
          (atom
            (qid)))
        (rhs
          (expr
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid))))))))

================================================================================
where clauses 3
================================================================================

even : Nat -> Bool
even Z = True
even (S k) = odd k where
  odd : Nat -> Bool
  odd Z = False
  odd (S k) = even k

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (expr
          (atom
            (qid))))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid)))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (expr
          (atom
            (qid))
          (atom
            (qid)))))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))))
    (where
      (function
        (lhs
          (function_name
            (atom
              (qid))))
        (rhs
          (expr
            (atom
              (qid))
            (expr
              (atom
                (qid))))))
      (function
        (lhs
          (atom
            (qid))
          (atom
            (qid)))
        (rhs
          (expr
            (atom
              (qid)))))
      (function
        (lhs
          (atom
            (qid))
          (atom
            (expr
              (atom
                (qid))
              (atom
                (qid)))))
        (rhs
          (expr
            (atom
              (qid))
            (atom
              (qid))))))))

================================================================================
where clauses 4
================================================================================

test : List Nat
test = [c (S 1), c Z, d (S Z)]
  where c : Nat -> Nat
        c x = 42 + x

        d : Nat -> Nat
        d y = c (y + 1 + z y)
              where z : Nat -> Nat
                    z w = y + w

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid)))))
  (function
    (lhs
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (expr
            (atom
              (qid))
            (atom
              (qid))))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (qid))
        (atom
          (expr
            (atom
              (qid))
            (atom
              (qid))))
        (atom
          (qid))))
    (where
      (function
        (lhs
          (function_name
            (atom
              (qid))))
        (rhs
          (expr
            (atom
              (qid))
            (expr
              (atom
                (qid))))))
      (function
        (lhs
          (atom
            (qid))
          (atom
            (qid)))
        (rhs
          (expr
            (atom
              (qid))
            (atom
              (qid))
            (atom
              (qid)))))
      (function
        (lhs
          (function_name
            (atom
              (qid))))
        (rhs
          (expr
            (atom
              (qid))
            (expr
              (atom
                (qid))))))
      (function
        (lhs
          (atom
            (qid))
          (atom
            (qid)))
        (rhs
          (expr
            (atom
              (qid))
            (atom
              (expr
                (atom
                  (qid))
                (atom
                  (qid))
                (atom
                  (qid))
                (atom
                  (qid))
                (atom
                  (qid))
                (atom
                  (qid))))))
        (where
          (function
            (lhs
              (function_name
                (atom
                  (qid))))
            (rhs
              (expr
                (atom
                  (qid))
                (expr
                  (atom
                    (qid))))))
          (function
            (lhs
              (atom
                (qid))
              (atom
                (qid)))
            (rhs
              (expr
                (atom
                  (qid))
                (atom
                  (qid))
                (atom
                  (qid))))))))))

================================================================================
Totality and Covering
================================================================================

partial fromMaybe : Maybe a -> a
fromMaybe (Just x) = x

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (partial)
      (function_name
        (atom
          (qid))))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))
        (expr
          (atom
            (qid))))))
  (function
    (lhs
      (atom
        (qid))
      (atom
        (expr
          (atom
            (qid))
          (atom
            (qid)))))
    (rhs
      (expr
        (atom
          (qid))))))

================================================================================
Holes
================================================================================

main: IO ()
main = putStrLn ?greeting

--------------------------------------------------------------------------------

(source_file
  (function
    (lhs
      (atom
        (qid))
      (atom
        (qid))
      (atom)))
  (function
    (lhs
      (atom
        (qid)))
    (rhs
      (expr
        (atom
          (qid))
        (atom
          (qid))))))
