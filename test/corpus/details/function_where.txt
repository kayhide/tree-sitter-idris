================================================================================
Simple line (no indent)
================================================================================

f x = y 
  where y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname)))))))

================================================================================
Simple line (indent)
================================================================================

f x = y
  where
    y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname)))))))

================================================================================
Single line (on the same line)
================================================================================

f x = y where y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname)))))))

================================================================================
Multiline (no indent)
================================================================================

f x = y 
  where y : Int
        y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (signature
        (loname)
        (type_name
          (caname)))
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname)))))))

================================================================================
Multiline (indent)
================================================================================

f x = y
  where
    y : Int
    y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (signature
        (loname)
        (type_name
          (caname)))
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname)))))))

================================================================================
Telescope single line I
================================================================================

f x = z where z = y where y = z

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname)))
        (where)
        (declarations
          (function
            (lhs
              (funvar
                (loname)))
            (rhs
              (exp_name
                (loname)))))))))

================================================================================
Telescope single line II
================================================================================

f x = z where z = y
          where y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname))))))
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))))

================================================================================
Telescope multi line I
================================================================================

f x = z 
  where z : Int
        z = y
    where y = x

--------------------------------------------------------------------------------

(idris
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))
    (where)
    (declarations
      (signature
        (loname)
        (type_name
          (caname)))
      (function
        (lhs
          (funvar
            (loname)))
        (rhs
          (exp_name
            (loname))))))
  (function
    (lhs
      (funvar
        (loname)
        (patterns
          (pat_name
            (loname)))))
    (rhs
      (exp_name
        (loname)))))

================================================================================
FIXME Non-indented where keyword
================================================================================

public export
Zippable List1 where
  zipWith f (x ::: xs) (y ::: ys) = f x y ::: zipWith' xs ys
  where
      zipWith' : List a -> List b -> List c
      zipWith' [] _ = []

--------------------------------------------------------------------------------

(idris
  (implementation
    (implementation_head
      (visibility)
      (interface_name)
      (type_name
        (caname)))
    (implementation_body
      (where)
      (function
        (lhs
          (funop
            (patterns
              (pat_apply
                (loname)
                (pat_name
                  (loname))
                (pat_parens
                  (exp_name
                    (loname))
                  (exp_op)
                  (exp_name
                    (loname)))
                (pat_parens
                  (exp_name
                    (loname))
                  (exp_op)
                  (exp_name
                    (loname))))
              (operator)
              (pat_apply
                (loname)
                (pat_name
                  (loname))
                (pat_name
                  (loname))))
            (operator)
            (patterns
              (pat_apply
                (loname)
                (pat_name
                  (loname))
                (pat_name
                  (loname))
                (pat_name
                  (loname))
                (pat_name
                  (loname)))
              (operator)
              (pat_infix
                (pat_apply
                  (caname)
                  (pat_name
                    (loname)))
                (operator)
                (pat_infix
                  (pat_apply
                    (caname)
                    (pat_name
                      (loname)))
                  (operator)
                  (pat_apply
                    (caname)
                    (pat_name
                      (loname))
                    (pat_name
                      (loname))
                    (pat_list)
                    (pat_wildcard)))))))
        (rhs
          (exp_list))))))
